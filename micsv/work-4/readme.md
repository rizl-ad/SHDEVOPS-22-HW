# Решение ДЗ к занятию «Микросервисы: масштабирование»

## Задача 1: Кластеризация

Для крупной компании в качестве решения, обеспечивающего развёртывание, запуск и управление приложениями в системе, построенной на микросервисной архитектуре, можно предложить следующий стек:
1. CI/CD – **GitLab**.
2. Контейнеризация – **Docker**
3. Оркестрация контейнеров – **Kubernetes**
4. Service Mesh – **Istio**

Процесс взаимодействия строится следующим образом:
1. При изменении кода он помещается в Git-репозиторий.
2. После коммита кода в репозиторий **GitLab** запускает pipeline:
	- тестируется код;
	- при успешном тестировании кода, собирается приложение;
	- тестируется приложение (юнит-тесты и интеграционные тесты);
	- при успешном тестирования приложения собирается **Docker**-контейнер с приложением и его зависимостями;
	- **Docker**-контейнер сохраняется в **Docker**-registry;
	- используя Helm/kubectl контейнер развертывается в кластер **Kubernetes**.
3. **Kubernetes** обеспечивает:
	- управление жизненным циклом контейнеров и сервисов, производя их запуск, обновление и масштабирование;
	- внутреннее сетевое взаимодействие между сервисами;
	- хранения конфиденциальных данных и конфигураций приложений через Kubernetes Secrets и ConfigMaps.
4. **Istio** работает в качестве Service Mesh, обеспечивая безопасное, наблюдаемое и масштабируемое взаимодействие между микросервисами, которые находятся внутри **Kubernetes** кластера.

Обоснование выбора CI/CD системы подробно разобрано в [решении домашнего задания к занятию «Микросервисы: подходы»](https://github.com/rizl-ad/SHDEVOPS-22-HW/tree/main/micsv/work-3#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-1-%D0%BE%D0%B1%D0%B5%D1%81%D0%BF%D0%B5%D1%87%D0%B8%D1%82%D1%8C-%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D1%83).

### Почему Docker:
  - хорошая интеграция c **GitLab**;
  - развитая экосистема;
  - docker compose.

### Почему Kubernetes:

**Kubernetes** — это универсальное решение для оркестрации контейнеров, которое предоставляет множество функций, включая масштабируемость, автоматическое масштабирование, безопасность, интеграцию с CI/CD, поддержку многокластерной инфраструктуры и мощные возможности для настройки. Эти возможности делают его наиболее подходящим решение для сложных, высоконагруженных микросервисных систем.

### Почему Istio:

Несмотря на большую ресурсоемкость и сложность настройки чем у некоторых альтернатив, например, Kuma, которая также легче интегрируется с **Kong** ([выбранным в качестве API Gateway](https://github.com/rizl-ad/SHDEVOPS-22-HW/tree/main/micsv/work-2#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-1-api-gateway)), в контексте выбора решения для управления микросервисами в крупной высоконагруженной системе **Istio** является предпочтительным решением по следующим причинам:
  - ориентирован на **Kubernetes**;
  - сильно развитые инструменты масштабирования - подходит для самых сложных систем;
  - поддержка сложных сценариев маршрутизации;
  - широкий набор функциональных возможностей инструментов безопасности, наблюдаемости и управления трафиком.

## Задача 2: Распределённый кеш

