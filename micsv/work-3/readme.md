# Решение ДЗ к занятию «Микросервисы: подходы»

## Задача 1: Обеспечить разработку

Для крупной компании, строящей систему на основе микросервисной архитектуры наиболее подходящим CI/CD-решением является GitLab.   
Данное решение отлично подойдет компаниям стремящимся к единым процессам, централизованному управлению, контролю над инфраструктурой и корпоративной стандартизации. GitLab позволяет следовать данным философиям, соответствует всем заявленным требованиям и является полноценной all-in-one DevOps-платформой, включающий следующие компоненты:
- Git
- CI/CD
- Docker Registry
- Infrastructure-as-Code
- Security scanning
- Code review + Issue tracking
- Wiki
- Observability
- Kubernetes management
- Dependency proxy

Решение можно было бы построить на основе таких продуктов как GitHub и Jenkins, но GitLab в сравнении с ними:
- это единая платформа;
- лучше масштабируется на большое количество сервисов и команд;
- предоставляет более строгий контроль безопасности;
- имеет встроенный контейнерный реестр и DevSecOps;
- удобнее для управления корпоративной структурой;
- проще стандартизировать процессы разработки на уровне всей компании.

## Задача 2: Логи

Предлагаемое решение: Vector + Kafka + Elasticsearch + Kibana.

### **Vector**.

Обеспечивает:
- сбор логов из JSON-файлов, куда Docker/Kubernetes сохраняют stdout, процесс осуществляется без необходимости модификации приложений;
- буферизацию логов на диск, т.о. при сбоях сети данные не теряются;
- отправку логов в Kafka.

Выбор сделан в пользу Vector, т.к. он потребляет минимальное количество ресурсов и имеет высокую скорость работы, что обеспечивает высокопроизводительный сбор логов и минимизацию вероятности аффекта на сервисы.

### **Kafka**.

Ключевой компонент, обеспечивающий в связке с буферизацией Vector гарантированную доставку логов до центрального хранилища.

В предыдущем ДЗ мы определили что для крупной компании, строящей систему на основе микросервисной архитектуры, с учётом всех перечисленных требований, оптимальным выбором будет Apache Kafka.

### **Elasticsearch**.

Обеспечивает:
- централизованное хранение логов;
- поиск и фильтрации по записям логов.

Почему Elasticsearch:
- де-факто стандарт лог-хранилищ;
- быстрый полнотекстовый поиск;
- лёгкое масштабирование при росте количества микросервисов;
- богатая система индексов и ротации.

### **Kibana**.

Обеспечивает:
- пользовательский интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов;
- возможность дать ссылку на сохранённый поиск по записям логов.

Почему Kibana:
- native UI для Elasticsearch;
- фильтры, визуализации, полнотекстовый поиск, live-tail, saved searches;
- возможность делиться ссылками на saved searches.

## Задача 3: Мониторинг



## Задача 4: Логи *



## Задача 5: Мониторинг *

