# Решение [ДЗ к занятию «Обновление приложений»](https://github.com/netology-code/kuber-homeworks/blob/main/3.4/3.4.md)

## Задание 1. Выбрать стратегию обновления приложения и описать ваш выбор

Для описанных условий единственной подходящей стратегией является Recreate.

**Обоснование:**   
Выбор обусловлен ограничениями по ресурсам и несовместимостью версий:   
Несовместимость версий исключает стратегии Rolling Update и Canary, так как они подразумевают одновременное нахождение в кластере подов разных версий. Например, при работе с общей базой данных или очередями сообщений это может привести к повреждению данных или ошибкам логики.   
Запас ресурсов составляет всего 20%, что недостаточно для стратегии Blue-Green, где требуется удвоение мощностей (100% запаса). Ограниченность в ресурсах также может стать препятствием для полноценного Rolling Update с сохранением доступности, так как запуск даже одной новой реплики рядом со старыми может привести к исчерпанию ресурсов.

Стратегия Recreate сначала завершает работу всех старых реплик, высвобождая ресурсы, и только затем запускает новые. Это гарантирует, что лимиты ресурсов не будут превышены и не возникнет конфликта между несовместимыми версиями приложения.


## Задание 2. Обновить приложение

[YAML-конфигурация]()

Конфигурация задает достаточно агрессивную стратегию обновления приложения. При обновлении будет существенно снижена производительности приложения и резко возрастет утилизацию ресурсов. Но данная конфигурация позволит обеспечить заданное условие - сократить время обновления до минимума. К тому же стратегия не является предельно экстремальной, т.к. позволяет в процессе обновления сохранить доступными минимум 2 (40% при условии 5 реплик) экземпляра приложения.

Деплой приложения с версией nginx 1.19:   

Деплой приложения с версией nginx 1.20:   
Стратегия обновления позволяет оставаться доступным минимум 40% экземпляров приложения.   

Деплой приложения с версией nginx 1.28:

Откат к предыдущей версии:   

## Задание 3*. Создать Canary deployment

[YAML-конфигурации]()

Развертывание приложений, состояние ingress:   

Демонстрация маршрутизации трафика на разные приложения:

